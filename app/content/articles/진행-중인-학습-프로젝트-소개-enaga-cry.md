---
title: "진행 중인 학습 프로젝트 소개 : Enaga Cry"
date: 2021-10-24T03:07:08.399Z
description: 개인 학습을 위해 진행 중인 프로젝트에 대한 소개문
category: Programming
tags:
  - C#
---
요즘 다시 공부도 하면서 프로젝트를 하나 진행하고 있는데, 사회복무도 하고 프로젝트도 하고 하니까 블로그에 따로 글을 올릴 내용을 찾아볼 여유가 없네요...
그런고로 진행하는 프로젝트를 간단히 소개하는 글이라도 써보려고 합니다.
:br

## 프로젝트 구조
* 클라이언트 : Unity 2021
* 로그인 서버 : ASP.NET CORE 5
* 게임 서버 : .NET CORE 5
* 그 외 : MariaDB, Redis
가장 최신까지는 아니지만 나름 최근 버전을 테스트해볼 생각으로 골라봤습니다.
mono가 아니라 dotnet으로 리눅스에서 돌릴 수 있는 날이 다 오네요. 신난다
로그인 서버, 게임 서버, DB와 Redis는 도커로 띄워서 사용하고 있습니다.
Git 저장소는 프로젝트 전체가 하나의 저장소를 사용하고,
클라이언트와 로그인 서버 등은 각각 서브모듈로 만들었습니다.
:br

## 저장소 링크
본격적인 소개 전에 [GitHub 저장소 링크](https://github.com/gze1206/EnagaCry)부터 걸어두겠습니다.
:br

## Entrance 서버 - 로그인 서버
ASP.NET CORE를 사용한 웹 API 서버입니다.
회원가입과 로그인 API를 제공하고, 로그인 시 세션을 생성합니다.
생성한 세션은 Redis에 저장하고 유저 ID를 통해 세션 정보를 조회할 수 있게끔 합니다.
게임 서버에서 이 세션 만료 시간을 계속 갱신해주다가 Ping Pong이 장기간 실패했을 때 세션이 만료되어 해당 유저와의 접속을 끊을 수 있도록 하고자 합니다.
원래는 게임 서버를 Hall 서버와 Room 서버로 나눠서 만들려고 이 로그인 서버 이름이 Entrance가 되었는데, 나머지 서버가 하나로 합쳐지고 얘만 이렇게 남아있네요.
:br

## 게임 서버
로그인 이후 TCP로 클라이언트와 연결되는 서버입니다.
게임 로직들도 이 서버에서 돌아가고, 클라이언트 생사 체크를 하면서 Redis 세션을 관리해줍니다.
로그인 이후의 모든 작업이 이 서버와 이루어집니다.
멀티 쓰레딩과 비동기 작업을 나름대로 적용해서 사용할 생각이고, 유니티 비슷하게 Entity와 Component로 게임 로직을 구성해 돌려볼 생각입니다.
(ECS는 아니고 유니티 레거시 게임오브젝트 방식을 계획 중입니다)
:br

## 어떤 게임을 만들 것인가
The Binding of Isaac이라는 로그라이크 인디 게임과 비슷한 게임을 생각 중입니다.
4명 정도의 플레이어가 파티를 맺어 방을 생성해 진행하거나 매칭으로 방을 생성해 진행하게 될 것입니다.
매칭도 게임 서버에서 진행되며 매칭 대기열도 Redis에서 관리해볼 생각입니다.
도트도 직접 찍고 배경음악도 직접 만들고 해볼려는데, 도트 찍기도 힘드네요. 큰일입니다.
:br

## 현황
솔직히 실제 코드 작업량은 많지 않은 상태입니다.
처음에 했던 구조가 마음에 안 들어서 갈아엎어버리기도 했고, 교대근무라서 아침에 퇴근하면 피곤해서 바로 손이 안 갈 때가 많네요.
그래도 최대한 노트에 구조나 흐름 같은 거 정리는 해두고 있습니다.
조금이라도 여유가 되면 작업을 진행해 나갈 예정입니다.
도트랑 음악은...조금 더 공부를..
:br